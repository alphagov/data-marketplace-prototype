{% extends "layouts/main.html" %}

{% block pageTitle %}
  Task list template â€“ {{ serviceName }}
{% endblock %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        Service name goes here
      </h1>












<!-- Include stylesheet -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

<div class="editorContainer">
  <div id="p1">
    <p><strong>Hello World!</strong></p>
    <p>Some initial <strong>bold</strong> text. Any links within a button group will automatically align with the buttons.</p>
  </div>
</div>

<div>
  <div id="p2">
    <p>Foo</p>
  </div>
</div>

<hr>

<div class="govuk-button-group">
  <button class="govuk-button" data-module="govuk-button" onclick="edit('p1')">
    edit
  </button>
  <a class="govuk-link" href="#a" onclick="saveEdit()">Save</a>
  <a class="govuk-link" href="#b" onclick="cancelEdit()">Cancel</a>
</div>


<!-- Include the Quill library -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

<!-- Initialize Quill editor -->
<script>

//    var quill = new Quill('#p1', { theme: 'snow' });  

//  function edit() {
//    var quill = new Quill('#p1', { theme: 'snow' });  
//  }

var quillInstances = {};

function edit(elementID) {
  var element = document.querySelector('#' + elementID);
  if (!quillInstances[elementID]) {
    var quill = new Quill(element, { theme: 'snow' });
    quillInstances[elementID] = quill;
    var cancelCopy = quill.root.innerHTML;
  }
}

function cancelEdit() {
  var elementID = Object.keys(quillInstances)[0];
  var quill = quillInstances[elementID];
  if (quill) {
    // Get the HTML content of the editor at the point of cancellation    
    var saveCopy = quill.root.innerHTML;
    // Then remove the container and editor
    var firstEditor = document.querySelector('.editorContainer');
    if (firstEditor) { firstEditor.remove(); }
    // and paste the original content into the element with id="p2"
    document.getElementById("p2").innerHTML = saveCopy;
    // Finally, delete the reference to the Quill instance
    delete quillInstances[elementID];
  }
}


</script>




    </div>
  </div>

{% endblock %}


